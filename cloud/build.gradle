buildscript {
    ext {
        springBootVersion = '1.5.4.RELEASE'
    }
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        classpath 'com.h2database:h2:1.4.191'
    }
}

plugins {
    id "org.flywaydb.flyway" version "4.2.0"
    id "com.heroku.sdk.heroku-gradle" version "0.2.0"
}

flyway {
    url = "jdbc:mysql://us-cdbr-iron-east-05.cleardb.net/heroku_3b918570b207066?reconnect=true"
    user = "b0cf08670721fb"
    password = "77902b2a"
    locations = ["filesystem:db", "filesystem:database/db"]
    sqlMigrationPrefix = "v"
}

apply plugin: 'idea'
apply plugin: 'org.springframework.boot'

version = '0.0.1'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    // Database
    compile("mysql:mysql-connector-java")
}

heroku {
    appName = 'gift-demo'
    includes = ['c:/code/gift/server/build/libs/server-0.0.1-SNAPSHOT.jar']
    includeBuildDir = false
    processTypes(
            web: 'java $JAVA_OPTS -Dserver.port=$PORT -Dspring.profiles.active=default,prod -jar server-0.0.1-SNAPSHOT.jar'
    )
}